<!DOCTYPE html>
<html>

<head>
    <script type="text/javascript" src="d3.js"></script>
    <title> Add Rows To HTML Table From Array </title>
    <meta charset="windows-1252">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

    <table id="table" border="1">

        <!-- The Row Number 0 -->
        <tr>
            <th>Ingrediens</th>
            <th>Mængde</th>
            <th>CO2 udledt i kg</th>
        </tr>
        <!-- End Row Number 0 -->
        <!--
            <tr>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            
            <tr>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            
            <tr>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            
            <tr>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            
            <tr>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            -->
    </table>

    <script>
        d3.json("http://localhost:3000/final").then(function (data) {
            console.log("alt data:", data);
            let final = data.final;
            console.log("første række:", final[0])
            console.log("første række:", (final[0].navn), (final[0].co2_kg), (final[0].kategori_id));
            
            var array = [
                ["A1", "B1", "C1"],
                ["A2", "B2", "C2"],
                ["Vegetarret", final[34].co2_kg * 0.5 + final[38].co2_kg * 0.45 + final[1].co2_kg * 0.3 + final[0].co2_kg * 0.175 + final[21].co2_kg * 0.15 + final[22].co2_kg * 0.01 + final[37].co2_kg * 0.14 + final[20].co2_kg * 0.007 + final[39].co2_kg * 0.005 + final[53].co2_kg * 0.031],
                ["A4", "B4", "C4"],
                ["A5", "B5", "C5"],
                ["A1", "B1", "C1"],
                ["A2", "B2", "C2"],
                ["A3", "B3", "C3"],
                ["A4", "B4", "C4"],
                ["A5", "B5", "C5"]],
                table = document.getElementById("table");

            /* Method 1
            // rows
            for(var i = 1; i < table.rows.length; i++)
            {
              // cells
              for(var j = 0; j < table.rows[i].cells.length; j++)
              {
                  table.rows[i].cells[j].innerHTML = array[i - 1][j];
              }
            }
                */

            // Method 2

            for (var i = 0; i < array.length; i++) {
                // create a new row
                var newRow = table.insertRow(table.length);
                for (var j = 0; j < array[i].length; j++) {
                    // create a new cell
                    var cell = newRow.insertCell(j);

                    // add value to the cell
                    cell.innerHTML = array[i][j];
                }
            }
        })
    </script>

</body>

</html>