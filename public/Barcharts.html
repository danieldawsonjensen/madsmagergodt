<!DOCTYPE html>
<html>
<meta charset="UTF-8">

<head>
  <link rel="stylesheet" href="styles.css">
  <title>SvanseAhmad</title>
  <script type="text/javascript" src="d3.js"></script>
  <style>

  </style>
</head>
<div class="overskrift">
  <h1>Co2 aftryk gennem Ahmads røvhul</h1>
</div>

<body>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>

  <canvas id="myChart" style="width:100%;max-width:600px"></canvas>
  <script>
    let kategori = ["brød", "fisk", "frugt", "krydderier", "grøntsager", "kød", "mejeri"];
    let brød_varer = ["rugbrød", "burgerboller", "toastbrød", "granolabar", "chokoladekage", "pizza", "pasta"];
    let fisk_varer = ["tun i vand", "ørred", "laks", "makrel", "sild", "torsk"];
    let frugt_varer = ["avokado", "banan", "citron", "vandmelon", "appelsin", "ananas"];
    let krydderi_varer = ["makrelsalat", "salt", "remoulade", "okseboullion", "sort peber", "tomatketchup", "vegansk mayo"];
    let grøntsags_varer = ["rød peber", "agurk", "hvidløg", "broccoli", "spinat", "iceberg salat", "svampe", "kartofler", "gullerødder", "løg"];
    let kød_varer = ["oksefillet", "hakket oksekød", "t-bone steak", "bacon", "svinepølse", "kyllingepølse", "hakket svinekød", "kalvekød", "hakket kyllingekød", "hel kylling"];
    let mejeri_varer = ["smør", "skyr", "ost", "æg", "havremælk", "soyamælk", "skummetmælk", "kakao, skummetmælk", "vegansk smør", "vegansk ost"];</script>



  <script type="text/javascript"></script>
  <script>
    d3.json("http://localhost:3000/final").then(function (data) {
      console.log("alt data:", data);
      let final = data.final;
      console.log("første række:", final[0])
      console.log("første række:", (final[0].navn), (final[0].co2_kg), (final[0].kategori_id));

      var chartColors = {
        red: 'rgb(255, 0, 0)',
        blue: 'rgb(0, 180, 0)'
      };
      Chart.defaults.global.defaultFontColor = "white";
      var ctx = document.getElementById("myChart").getContext("2d");
      var myChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ["Pasta kødsovs", "Cæsarsalat", "Kylling og kartofler", "Lasagne", "Din ret"],
          datasets: [{
            label: 'Total mængde Co2 udledt',
            backgroundColor: [
              chartColors.blue,
              chartColors.blue,
              chartColors.blue,
              chartColors.blue,
              chartColors.blue
            ],
            data: [17.6192, 2.6922, 2.58, 21.1552, final[10].co2_kg]
          }],
        }
      });

      var colorChangeValue = 15; //set this to whatever is the deciding color change value
      var dataset = myChart.data.datasets[0];
      for (var i = 0; i < dataset.data.length; i++) {
        if (dataset.data[i] > colorChangeValue) {
          dataset.backgroundColor[i] = chartColors.red;
        }
      }

      var sortBars = function () {
        svg.selectAll("rect")
          .sort(function (a, b) {
            return d3.ascending(a, b);
          })
          .attr("x", function (d, i) {
            return xScale(i);
          });
      }

      myChart.update();





      var tds = document.getElementById('Co2').getElementsByTagName('td');
      var sum = 0;
      for (var i = 0; i < tds.length; i++) {
        if (tds[i].className == 'count-me') {
          sum += isNaN(tds[i].innerHTML) ? 0 : parseInt(tds[i].innerHTML);
        }
      }
      document.getElementById('Co2').innerHTML += '<tr><td>Co2 udledt i alt</td><td colspan="2">' + sum + " kg" + '</td></tr>';
    })
  </script>


  <table id="Co2">
    <tr>
      <th>Ingrediens</td>
      <th>Mængde</td>
      <th>Co2 udledt i kg</td>
    </tr>
    <tr>
      <td>Oksekød</td>
      <td>1000g</td>
      <td class="count-me">48</td>
    </tr>
    <tr>
      <td id=1>Smør</td>
      <td>336g</td>
      <td class="count-me">420</td>
    </tr>
    <tr>
      <td>Pasta</td>
      <td>1g</td>
      <td class="count-me">1337</td>
    </tr>
    <tr>
      <td>Kylling</td>
      <td>750g</td>
      <td class="count-me">69</td>
    </tr>
    <tr>
      <td>Ost 45%</td>
      <td>1789g</td>
      <td class="count-me">75</td>
    </tr>
    <tr>
      <td>Pizza</td>
      <td>900g</td>
      <td class="count-me">61</td>
    </tr>
  </table>


  <p> Du har udledt 2010kg Co2, det svarer til at køre x km i en VW up.
    <a href="javascript:alert('Man kan ikke sove i Mariannes hus fordi hun skriger for meget');">TRYK PÅ MIG</a>
  </p>

  <div class="container">
    <p class="lead">Læs mere om projektet her.</p>
    <div class="header-bar">
        <h3 class="logo">Gruppe 5</h3>
        <ul class="slider-menu">
            <li><a href="http://localhost:3000/Projektstyring.html">Fagside</a></li>
            <li><a class=popup1 href="javascript:alert('DU FÅR FUCKING IKKE NOGET AT VIDE DIN SVANS');">Om os</a></li>
        </ul>
    </div>
</div>
</body>



</html>