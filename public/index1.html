<!DOCTYPE html>
<html>

<head>

    <title>Co2 aftryk gennem maden</title>
    <script type="text/javascript" src="d3.js"></script>
    <style>
        select {
            font-size: 20px;
        }
    </style>
</head>
<h1>Co2 aftryk gennem maden</h1>

<body>
    <select id="selectNumber" onchange="configureDropDownLists(this,document.getElementById('ddl2'))">
        <option value="">Vælg kategori</option>
        <option value="final[0].navn"></option>
        <option value="Fisk">fisk</option>
        <option value="Frugt">frugt</option>
        <option value="Krydderier">krydderier</option>
        <option value="Grøntsag">grøntsager</option>
        <option value="Kød">kød</option>
        <option value="Mejeri">mejeri</option>
    </select>
    <br>
    <br>
    <select id="ddl2">
    </select>
    <script type="text/javascript">
        function configureDropDownLists(ddl1, ddl2) {

            let brød_varer = ["rugbrød", "burgerboller", "toastbrød", "granolabar", "chokoladekage", "pizza", "pasta"];
            let fisk_varer = ["tun i vand", "ørred", "laks", "makrel", "sild", "torsk"];
            let frugt_varer = ["avokado", "banan", "citron", "vandmelon", "appelsin", "ananas"];
            let krydderi_varer = ["makrelsalat", "salt", "remoulade", "okseboullion", "sort peber", "tomatketchup", "vegansk mayo"];
            let grøntsags_varer = ["rød peber", "agurk", "hvidløg", "broccoli", "spinat", "iceberg salat", "svampe", "kartofler", "gullerødder", "løg"];
            let kød_varer = ["oksefillet", "hakket oksekød", "t-bone steak", "bacon", "svinepølse", "kyllingepølse", "hakket svinekød", "kalvekød", "hakket kyllingekød", "hel kylling"];
            let mejeri_varer = ["smør", "skyr", "ost", "æg", "havremælk", "soyamælk", "skummetmælk", "kakao, skummetmælk", "vegansk smør", "vegansk ost"];
            let arrayVarer = [brød_varer, fisk_varer, frugt_varer, krydderi_varer, grøntsags_varer, kød_varer, mejeri_varer];

            //nedenstående kode gør at ingrediens-valget er afhængigt af kategori-valget
            switch (ddl1.value) {
                case 'Brød':
                    ddl2.options.length = 0;
                    for (i = 0; i < arrayVarer[0].length; i++) {
                        createOption(ddl2, arrayVarer[0][i], arrayVarer[0, i]);
                    }
                    break;
                case 'Fisk':
                    ddl2.options.length = 0;
                    for (i = 0; i < arrayVarer[1].length; i++) {
                        createOption(ddl2, arrayVarer[1][i], arrayVarer[1, i]);
                    }
                    break;
                case 'Frugt':
                    ddl2.options.length = 0;
                    for (i = 0; i < arrayVarer[2].length; i++) {
                        createOption(ddl2, arrayVarer[2][i], arrayVarer[2, i]);
                    }
                    break;
                    ddl2.options.length = 0;
                case 'Krydderier':
                    ddl2.options.length = 0;
                    for (i = 0; i < arrayVarer[3].length; i++) {
                        createOption(ddl2, arrayVarer[3][i], arrayVarer[3, i]);
                    }
                    break;
                case 'Grøntsag':
                    ddl2.options.length = 0;
                    for (i = 0; i < arrayVarer[4].length; i++) {
                        createOption(ddl2, arrayVarer[4][i], arrayVarer[4, i]);
                    }
                    break;
                case 'Kød':
                    ddl2.options.length = 0;
                    for (i = 0; i < arrayVarer[5].length; i++) {
                        createOption(ddl2, arrayVarer[5][i], arrayVarer[5, i]);
                    }
                    break;
                case 'Mejeri':
                    ddl2.options.length = 0;
                    for (i = 0; i < arrayVarer[6].length; i++) {
                        createOption(ddl2, arrayVarer[6][i], arrayVarer[6, i]);
                    }
                    break;
            }

        }

        function createOption(ddl, text, value) {
            var opt = document.createElement('option');
            opt.value = value;
            opt.text = text;
            ddl.options.add(opt);
        }

        d3.json("http://localhost:3000/final").then(function (data) {
            console.log("alt data:", data);
            let final = data.final;
            console.log("første række:", final[0])
            console.log("første række:", (final[0].navn), (final[0].co2_kg), (final[0].kategori_id));
        })

    </script>
</body>



</html>